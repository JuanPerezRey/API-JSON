{% extends "base.html" %}

{% block content %}
<h1>Agregar Telefono</h1>
<form id="crearTelefonoForm">
    <div class="form-group">
        <label for="marca">Marca</label>
        <input type="text" class="form-control" id="marca" name="marca" required>
    </div>
    <div class="form-group">
        <label for="modelo">Modelo</label>
        <input type="text" class="form-control" id="modelo" name="modelo" required>
    </div>
    <div class="form-group">
        <label for="almacenamiento_gb">AlmacenamientoGB</label>
        <input type="text" class="form-control" id="almacenamiento_gb" name="almacenamiento_gb" required>
    </div>
    <div class="form-group">
        <label for="color">Color</label>
        <input type="text" class="form-control" id="color" name="color" required>
    </div>
    <div class="form-group">
        <label for="precio">Precio</label>
        <input type="text" class="form-control" id="precio" name="precio" required>
    </div>
    <div class="form-group">
        <label for="stock">Stock</label>
        <input type="number" class="form-control" id="stock" name="stock" required>
    </div>
    <div class="form-group">
        <label for="codigo_telefono">Codigo Telefono</label>
        <input type="number" class="form-control" id="codigo_telefono" name="codigo_telefono" required>
    </div>
    <button type="submit" class="btn btn-primary">Crear</button>
</form>

<script>
document.getElementById("crearTelefonoForm").addEventListener("submit", async function(event) {
    event.preventDefault();

    const formData = {
        marca: document.getElementById("marca").value,
        modelo: document.getElementById("modelo").value,
        almacenamiento_gb: document.getElementById("almacenamiento_gb").value,
        color: document.getElementById("color").value,
        precio: document.getElementById("precio").value,
        stock: document.getElementById("stock").value,
        codigo_telefono: parseInt(document.getElementById("codigo_telefono").value),
    };

    const response = await fetch("/crear", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
        },
        body: JSON.stringify(formData),
    });

    if (response.ok) {
        alert("Telefono agregado exitosamente");
        window.location.href = "/";
    } else {
        const error = await response.json();
        alert(`Error: ${error.detail}`);
    }
});
</script>
{% endblock %}